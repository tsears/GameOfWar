{"version":3,"sources":["webpack:///webpack/bootstrap 1f7b005433fb44ae801b","webpack:///./js/War.js","webpack:///./js/WarGame.js","webpack:///./js/Player.js","webpack:///./js/RoundResult.js","webpack:///./js/Deck.js","webpack:///./js/Card.js"],"names":["module","exports","Game","Deck","WarGame","deck","numPlayers","_deck","_numPlayers","_players","initialSize","Error","i","push","j","currentSize","receivingPlayerIndex","card","deal","addCard","getPlayer","player","pIndex","playRound","result","indicies","map","p","_resolveRound","warringPlayers","draw","revealCard","length","playerIndex","draws","max","_findCardWithMaxValue","atWar","filter","c","rank","war","warringPlayerIndicies","winner","indexOf","cards","reduce","a","b","Player","name","_name","_cards","pop","RoundResult","_draws","_war","_winner","v","numSuits","numRanks","shift","shuffle","newOrder","oldOrder","slice","randomIndex","Math","floor","random","randomCard","splice","_numSuits","_numRanks","_initialSize","Card","suit","_suit","_rank"],"mappings":"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","file":"War.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1f7b005433fb44ae801b","import WarGame from './WarGame';\nimport Deck from './Deck';\n\nmodule.exports = {\n  Game: WarGame,\n  Deck\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/War.js","import Player from './Player';\nimport RoundResult from './RoundResult';\n\nexport default class WarGame {\n  constructor(deck, numPlayers) {\n    this._deck = deck;\n    this._numPlayers = numPlayers;\n    this._players = [];\n\n    if (this._deck.initialSize % numPlayers !== 0 ) {\n      // if there is a remainder, then it wasn't evenly divisble...\n      throw new Error('Invalid player/deck combo');\n    }\n\n    for (let i = 1; i <= numPlayers; ++i) {\n      this._players.push(new Player(`Player ${i}`));\n    }\n\n    let j = 0;\n    while(this._deck.currentSize > 0) {\n      let receivingPlayerIndex = j % numPlayers;\n      let card = this._deck.deal();\n      this._players[receivingPlayerIndex].addCard(card);\n      ++j;\n    }\n  }\n\n  get deck() { return this._deck; }\n  get players() { return this._players; }\n\n  getPlayer = (player) => {\n    // players are not zero indexed... didn't want to do that jujitsu from the\n    // consumer.\n    const pIndex = player - 1;\n    return this._players[pIndex];\n  }\n\n  playRound = () => {\n    const result = new RoundResult();\n    const indicies = this._players.map((p, i) => { return i; });\n\n    return this._resolveRound(indicies, result);\n  }\n\n\n  /*****************************************************************************\n  * _resolveRound\n  *\n  * This is where all the magic happens.  We will recursively determine the outcome\n  * of the round.  If the draws result in a war, we will keep calling this function\n  * until all wars are resolved.  A complete record of the draws will be returned\n  * along with the winner\n  *****************************************************************************/\n\n  _resolveRound = (warringPlayers, result) => {\n    const draw = warringPlayers.map(i => {\n      return this._players[i].revealCard();\n    });\n\n    // for .. of was giving babel fits... didn't want to run it down now.\n    for(let j = 0; j < warringPlayers.length; ++j) {\n      const playerIndex = warringPlayers[j];\n\n      if (!result.draws[playerIndex]) { result.draws[playerIndex] = []; }\n      result.draws[playerIndex].push(draw[j]);\n    }\n\n    const max = this._findCardWithMaxValue(draw);\n    const atWar = draw.filter(c => c.rank === max.rank).length > 1;\n\n    if (atWar) {\n      result.war = true;\n\n      const warringPlayerIndicies = [];\n      for (let i = 0; i < draw.length; i++) {\n        if (draw[i].rank === max.rank) {\n          warringPlayerIndicies.push(warringPlayers[i]);\n        }\n      }\n\n      // recurse\n      return this._resolveRound(warringPlayerIndicies, result);\n    } else {\n      // break recursion\n      let winner = this._players[warringPlayers[draw.indexOf(max)]]; //object equality....\n      result.winner = winner;\n      return result;\n    }\n  }\n\n  _findCardWithMaxValue = (cards) => {\n    return cards.reduce((a, b) => {\n      // a is the value of the element we're looking at,\n      // b is the value of the previous max\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce#Parameters\n      return b.rank > a.rank ? b : a;\n    }, {rank: 0});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/WarGame.js","export default class Player {\n  constructor(name) {\n    this._name = name;\n    this._cards = [];\n  }\n\n  get cardCount() { return this._cards.length; }\n  get name() { return this._name; }\n\n  addCard(card) {\n    this._cards.push(card);\n  }\n\n  revealCard() {\n    return this._cards.pop();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/Player.js","export default class RoundResult {\n  constructor() {\n    this._draws = [];\n    this._war = false;\n    this._winner = null;\n  }\n\n  get draws() { return this._draws; }\n\n  get war() { return this._war; }\n  set war(v) { this._war = v; }\n\n  get winner() { return this._winner; }\n  set winner(v) { this._winner = v; }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/RoundResult.js","import Card from './Card';\n\nexport default class Deck {\n  constructor(numSuits, numRanks) {\n    this._numSuits = numSuits;\n    this._numRanks = numRanks;\n    this._cards = [];\n    this._initialSize = 0; // yes, this is just suits * ranks. but we'll count for fun\n\n    for (let i = 1; i <= numSuits; ++i) {\n      for (let j = 1; j <= numRanks; ++j) {\n        ++this._initialSize;\n        this._cards.push(new Card(i, j));\n      }\n    }\n  }\n\n  get numSuits() { return this._numSuits; }\n  get numRanks() { return this._numRanks; }\n  get currentSize() { return this._cards.length; }\n  get initialSize() { return this._initialSize; }\n\n  deal = () => {\n    return this._cards.shift(); //FIFO\n  };\n\n  shuffle = () => {\n    let newOrder = [];\n    let oldOrder = this._cards.slice(); // we will leave the initial ordering in tact until the shuffle is complete...\n\n    do {\n      let randomIndex = Math.floor(Math.random() * oldOrder.length);\n      let randomCard = oldOrder.splice(randomIndex, 1)[0];\n      newOrder.push(randomCard);\n    } while(oldOrder.length > 0);\n\n    this._cards = newOrder;\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/Deck.js","export default class Card {\n  constructor(suit, rank) {\n    this._suit = suit;\n    this._rank = rank;\n  }\n\n  get suit() {\n    return this._suit;\n  }\n\n  get rank() {\n    return this._rank;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/Card.js"],"sourceRoot":""}