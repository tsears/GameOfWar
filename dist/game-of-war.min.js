!function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=t(1),s=r(u),o=t(4),f=r(o),l=function(){function e(n,t,r){a(this,e),this._numSuits=n,this._numRanks=t,this._numPlayers=r,this._warGame=new s.default(new f.default(this._numSuits,this._numRanks),this._numPlayers)}return i(e,[{key:"game",get:function(){return this._warGame}}]),e}();n.default=l},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.CardAwardMethod=void 0;var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=t(2),s=r(u),o=t(3),f=r(o),l=t(4),c=r(l),h=n.CardAwardMethod={Increasing:0,Shuffled:1},d=function(){function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.Increasing;if(a(this,e),this._deck=n,this._numPlayers=t,this._players=[],this._playerCount=0,this._distributionMethod=r,n.currentSize<t)throw new Error("Deck must at least the same size as the number of players");for(var i=1;i<=t;++i)this._players.push(new s.default("Player "+i)),++this._playerCount;this._startGame()}return i(e,[{key:"getPlayer",value:function(e){var n=e-1;return this._players[n]}},{key:"playRound",value:function(){var e=new f.default,n=this._players.map(function(e,n){return n});return this._resolveRound(n,e)}},{key:"_startGame",value:function(){this._distributeCards()}},{key:"_resolveRound",value:function(e,n){var t=this._draw(e,n),r=this._findCardWithMaxValue(t),a=t.filter(function(e){return e&&e.rank===r.rank}).length>1;if(a){n.war=!0;var i=this._getWarringPlayerIndicies(t,e,r);return this._prepForWar(t,i,n),this._resolveRound(i,n)}var u=this._players[e[t.indexOf(r)]];return this._finishRound(u,t,n)}},{key:"_prepForWar",value:function(e,n,t){this._draw(n,t)}},{key:"_finishRound",value:function(e,n,t){return e?(t.winner=e,this._awardCards(t.draws,e)):t.winner=null,this._gameIsOver()&&(t.gameOver=!0),t}},{key:"_draw",value:function(e,n){for(var t=this,r=e.map(function(e){return t._players[e].revealCard()}),a=0;a<e.length;++a){var i=e[a];n.draws[i]||(n.draws[i]=[]),n.draws[i].push(r[a])}return r}},{key:"_gameIsOver",value:function(){return this._players.filter(function(e){return 0===e.cardCount}).length===this._numPlayers-1}},{key:"_getWarringPlayerIndicies",value:function(e,n,t){for(var r=[],a=0;a<e.length;a++)e[a]&&e[a].rank===t.rank&&r.push(n[a]);return r}},{key:"_findCardWithMaxValue",value:function(e){return e.filter(function(e){return e}).reduce(function(e,n){return n.rank>e.rank?n:e},{rank:0})}},{key:"_awardCards",value:function(e,n){this._distributionMethod===h.Increasing?this._awardCardsIncreasing(e,n):this._distributionMethod===h.Shuffled&&this._awardCardsShuffled(e,n)}},{key:"_awardCardsIncreasing",value:function(e,n){for(var t=0;t<e.length;++t)for(var r=0;r<e[t].length;++r)e[t][r]&&n.awardCard(e[t][r])}},{key:"_awardCardsShuffled",value:function(e,n){for(var t=new c.default(0,0),r=0;r<e.length;++r)for(var a=0;a<e[r].length;++a)e[r][a]&&t.add(e[r][a]);for(t.shuffle();t.currentSize>0;)n.awardCard(t.deal())}},{key:"_distributeCards",value:function(){this._deck.shuffle();for(var e=Math.floor(this._deck.currentSize/this._numPlayers);e>0;){for(var n=0;n<this._numPlayers;++n)this._players[n].addCard(this._deck.deal());--e}}},{key:"deck",get:function(){return this._deck}},{key:"playerCount",get:function(){return this._playerCount}}]),e}();n.default=d},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=function(){function e(n){t(this,e),this._name=n,this._cards=[]}return r(e,[{key:"addCard",value:function(e){this._cards.push(e)}},{key:"awardCard",value:function(e){this._cards.unshift(e)}},{key:"revealCard",value:function(){return this._cards.pop()}},{key:"cardCount",get:function(){return this._cards.length}},{key:"score",get:function(){return this._cards.length}},{key:"name",get:function(){return this._name}}]),e}();n.default=a},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=function(){function e(){t(this,e),this._draws=[],this._war=!1,this._winner=null,this._gameOver=!1}return r(e,[{key:"draws",get:function(){return this._draws}},{key:"war",get:function(){return this._war},set:function(e){this._war=e}},{key:"winner",get:function(){return this._winner},set:function(e){this._winner=e}},{key:"gameOver",get:function(){return this._gameOver},set:function(e){this._gameOver=e}}]),e}();n.default=a},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=t(5),s=r(u),o=function(){function e(n,t){a(this,e),this._numSuits=n,this._numRanks=t,this._cards=[],this._initialSize=0;for(var r=1;r<=n;++r)for(var i=1;i<=t;++i)++this._initialSize,this._cards.push(new s.default(r,i))}return i(e,[{key:"deal",value:function(){return this._cards.pop()}},{key:"add",value:function(e){return this._cards.push(e)}},{key:"shuffle",value:function(){var e=[],n=this._cards.slice();do{var t=Math.floor(Math.random()*n.length),r=n.splice(t,1)[0];e.push(r)}while(n.length>0);this._cards=e}},{key:"numSuits",get:function(){return this._numSuits}},{key:"numRanks",get:function(){return this._numRanks}},{key:"currentSize",get:function(){return this._cards.length}},{key:"initialSize",get:function(){return this._initialSize}}]),e}();n.default=o},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=function(){function e(n,r){t(this,e),this._suit=n,this._rank=r}return r(e,[{key:"suit",get:function(){return this._suit}},{key:"rank",get:function(){return this._rank}}]),e}();n.default=a}]);
//# sourceMappingURL=game-of-war.min.js.map