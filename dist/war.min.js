!function(e){function n(r){if(t[r])return t[r].exports;var u=t[r]={exports:{},id:r,loaded:!1};return e[r].call(u.exports,u,u.exports,n),u.loaded=!0,u.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=t(1),s=r(a),o=t(4),f=r(o),c=function(){function e(n,t,r){u(this,e),this._numSuits=n,this._numRanks=t,this._numPlayers=r,this._warGame=new s.default(new f.default(this._numSuits,this._numRanks),this._numPlayers)}return i(e,[{key:"game",get:function(){return this._warGame}}]),e}();n.default=c},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=t(2),s=r(a),o=t(3),f=r(o),c=t(4),l=(r(c),function(){function e(n,t){if(u(this,e),this._deck=n,this._numPlayers=t,this._players=[],this._playerCount=0,n.currentSize<t)throw new Error("Deck must at least the same size as the number of players");for(var r=1;r<=t;++r)this._players.push(new s.default("Player "+r)),++this._playerCount;this._distributeCards()}return i(e,[{key:"getPlayer",value:function(e){var n=e-1;return this._players[n]}},{key:"playRound",value:function(){var e=new f.default,n=this._players.map(function(e,n){return n});return this._resolveRound(n,e)}},{key:"_resolveRound",value:function(e,n){var t=this._draw(e,n),r=this._findCardWithMaxValue(t),u=t.filter(function(e){return e&&e.rank===r.rank}).length>1;if(u){n.war=!0;for(var i=[],a=0;a<t.length;a++)t[a]&&t[a].rank===r.rank&&i.push(e[a]);return this._draw(i,n),this._resolveRound(i,n)}var s=this._players[e[t.indexOf(r)]];return s?(n.winner=s,this._awardCards(n.draws,s)):n.winner=null,this._gameIsOver()&&(n.gameOver=!0),n}},{key:"_draw",value:function(e,n){for(var t=this,r=e.map(function(e){return t._players[e].revealCard()}),u=0;u<e.length;++u){var i=e[u];n.draws[i]||(n.draws[i]=[]),n.draws[i].push(r[u])}return r}},{key:"_gameIsOver",value:function(){return this._players.filter(function(e){return 0===e.cardCount}).length===this._numPlayers-1}},{key:"_findCardWithMaxValue",value:function(e){return e.filter(function(e){return e}).reduce(function(e,n){return n.rank>e.rank?n:e},{rank:0})}},{key:"_awardCards",value:function(e,n){for(var t=0;t<e.length;++t)for(var r=0;r<e[t].length;++r)e[t][r]&&n.awardCard(e[t][r])}},{key:"_distributeCards",value:function(){this._deck.shuffle();for(var e=Math.floor(this._deck.currentSize/this._numPlayers);e>0;){for(var n=0;n<this._numPlayers;++n)this._players[n].addCard(this._deck.deal());--e}}},{key:"deck",get:function(){return this._deck}},{key:"playerCount",get:function(){return this._playerCount}}]),e}());n.default=l},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(n){t(this,e),this._name=n,this._cards=[]}return r(e,[{key:"addCard",value:function(e){this._cards.push(e)}},{key:"awardCard",value:function(e){this._cards.unshift(e)}},{key:"revealCard",value:function(){return this._cards.pop()}},{key:"cardCount",get:function(){return this._cards.length}},{key:"score",get:function(){return this._cards.length}},{key:"name",get:function(){return this._name}}]),e}();n.default=u},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){t(this,e),this._draws=[],this._war=!1,this._winner=null,this._gameOver=!1}return r(e,[{key:"draws",get:function(){return this._draws}},{key:"war",get:function(){return this._war},set:function(e){this._war=e}},{key:"winner",get:function(){return this._winner},set:function(e){this._winner=e}},{key:"gameOver",get:function(){return this._gameOver},set:function(e){this._gameOver=e}}]),e}();n.default=u},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=t(5),s=r(a),o=function(){function e(n,t){u(this,e),this._numSuits=n,this._numRanks=t,this._cards=[],this._initialSize=0;for(var r=1;r<=n;++r)for(var i=1;i<=t;++i)++this._initialSize,this._cards.push(new s.default(r,i))}return i(e,[{key:"deal",value:function(){return this._cards.pop()}},{key:"add",value:function(e){return this._cards.push(e)}},{key:"shuffle",value:function(){var e=[],n=this._cards.slice();do{var t=Math.floor(Math.random()*n.length),r=n.splice(t,1)[0];e.push(r)}while(n.length>0);this._cards=e}},{key:"numSuits",get:function(){return this._numSuits}},{key:"numRanks",get:function(){return this._numRanks}},{key:"currentSize",get:function(){return this._cards.length}},{key:"initialSize",get:function(){return this._initialSize}}]),e}();n.default=o},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(n,r){t(this,e),this._suit=n,this._rank=r}return r(e,[{key:"suit",get:function(){return this._suit}},{key:"rank",get:function(){return this._rank}}]),e}();n.default=u}]);
//# sourceMappingURL=war.min.js.map