!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=r(a),s=function e(t,n,r){i(this,e),this._numSuits=t,this._numRanks=n,this._numPlayers=r,this._warGame=new u.default(new Deck(this._numSuits,this._numRanks),this._numPlayers)};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),s=r(u),o=n(3),c=r(o),l=n(4),f=r(l),d=function(){function e(t,n){if(i(this,e),this._deck=t,this._discardPile=new f.default(0,0),this._numPlayers=n,this._players=[],t.currentSize<n)throw new Error("Deck must at least the same size as the number of players");for(var r=1;r<=n;++r)this._players.push(new s.default("Player "+r));this._distributeCards()}return a(e,[{key:"getPlayer",value:function(e){var t=e-1;return this._players[t]}},{key:"playRound",value:function(){var e=new c.default,t=this._players.map(function(e,t){return t});return this._resolveRound(t,e)}},{key:"_resolveRound",value:function(e,t){for(var n=this,r=e.map(function(e){return n._players[e].revealCard()}),i=0;i<e.length;++i){var a=e[i];t.draws[a]||(t.draws[a]=[]),t.draws[a].push(r[i])}var u=this._findCardWithMaxValue(r),s=r.filter(function(e){return e.rank===u.rank}).length>1;if(s){t.war=!0;for(var o=[],c=0;c<r.length;c++)r[c].rank===u.rank&&o.push(e[c]);return this._discardDraw(r),this._playersNeedCards()&&this._distributeCards(),this._resolveRound(o,t)}var l=this._players[e[r.indexOf(u)]];return t.winner=l,this._discardDraw(r),this._playersNeedCards()&&this._distributeCards(),t}},{key:"_findCardWithMaxValue",value:function(e){return e.reduce(function(e,t){return t.rank>e.rank?t:e},{rank:0})}},{key:"_discardDraw",value:function(e){for(var t=0;t<e.length;++t)this._discardPile.add(e[t]);e=null}},{key:"_playersNeedCards",value:function(){return this._players.filter(function(e){return 0===e.cardCount}).length>0}},{key:"_distributeCards",value:function(){for(var e=this._discardPile.currentSize,t=0;t<e;++t){var n=this._discardPile.deal();this._deck.add(n)}this._deck.shuffle();for(var r=Math.floor(this._deck.currentSize/this._numPlayers);r>0;){for(var i=0;i<this._numPlayers;++i)this._players[i].addCard(this._deck.deal());--r}}},{key:"deck",get:function(){return this._deck}},{key:"discardPile",get:function(){return this._discardPile}},{key:"players",get:function(){return this._players}}]),e}();t.default=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this._name=t,this._cards=[],this._wonCards=[]}return r(e,[{key:"addCard",value:function(e){this._cards.push(e)}},{key:"revealCard",value:function(){return this._cards.pop()}},{key:"claimCard",value:function(e){this._wonCards.push(e)}},{key:"cardCount",get:function(){return this._cards.length}},{key:"name",get:function(){return this._name}}]),e}();t.default=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this._draws=[],this._war=!1,this._winner=null}return r(e,[{key:"draws",get:function(){return this._draws}},{key:"war",get:function(){return this._war},set:function(e){this._war=e}},{key:"winner",get:function(){return this._winner},set:function(e){this._winner=e}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),s=r(u),o=function(){function e(t,n){i(this,e),this._numSuits=t,this._numRanks=n,this._cards=[],this._initialSize=0;for(var r=1;r<=t;++r)for(var a=1;a<=n;++a)++this._initialSize,this._cards.push(new s.default(r,a))}return a(e,[{key:"deal",value:function(){return this._cards.pop()}},{key:"add",value:function(e){return this._cards.push(e)}},{key:"shuffle",value:function(){var e=[],t=this._cards.slice();do{var n=Math.floor(Math.random()*t.length),r=t.splice(n,1)[0];e.push(r)}while(t.length>0);this._cards=e}},{key:"numSuits",get:function(){return this._numSuits}},{key:"numRanks",get:function(){return this._numRanks}},{key:"currentSize",get:function(){return this._cards.length}},{key:"initialSize",get:function(){return this._initialSize}}]),e}();t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){n(this,e),this._suit=t,this._rank=r}return r(e,[{key:"suit",get:function(){return this._suit}},{key:"rank",get:function(){return this._rank}}]),e}();t.default=i}]);
//# sourceMappingURL=war.min.js.map